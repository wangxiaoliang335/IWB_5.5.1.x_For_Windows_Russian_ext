# 从 Git 历史中移除大文件

## 问题

大文件 `.vs/IWB_VS2015/v16/Browse.VC.db` 已经在 Git 历史记录中，即使从索引中移除，推送时仍然会被拒绝。

## 解决方案

需要从 Git 历史记录中完全移除这个文件。

### 方案 1: 使用 BFG Repo-Cleaner（推荐，最快）

如果已安装 BFG，可以使用：

```bash
# 删除大于 100MB 的文件
java -jar bfg.jar --strip-blobs-bigger-than 100M

# 清理和压缩
git reflog expire --expire=now --all
git gc --prune=now --aggressive
```

### 方案 2: 使用 git filter-branch（Git 内置工具）

```bash
# 从所有历史记录中移除 .vs 目录
git filter-branch --force --index-filter "git rm -rf --cached --ignore-unmatch .vs" --prune-empty --tag-name-filter cat -- --all

# 清理
git reflog expire --expire=now --all
git gc --prune=now --aggressive
```

### 方案 3: 如果这是第一次推送，重新创建仓库（最简单）

如果您还没有成功推送到远程，可以：

```bash
# 1. 备份当前工作
# （可选：创建一个新的分支保存当前状态）

# 2. 移除 .git 目录，重新初始化
rm -rf .git
git init

# 3. 添加远程仓库
git remote add github-ext git@github.com:wangxiaoliang335/IWB_5.5.1.x_For_Windows_Russian_ext.git

# 4. 确保 .gitignore 已配置
# （已经添加了 .vs/）

# 5. 添加文件（自动排除 .vs/）
git add .

# 6. 提交
git commit -m "Initial commit: IWB 5.5.1.x Russian version"

# 7. 推送
git push github-ext master
```

## 推荐方案

如果这是**第一次推送到 github-ext**（之前推送失败），**我推荐方案 3**，因为：
- 最简单、最快速
- 不会有历史记录问题
- 新仓库，没有其他依赖

如果已经成功推送过一些提交，使用**方案 2**。

